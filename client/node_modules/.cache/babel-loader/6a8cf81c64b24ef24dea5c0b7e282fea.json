{"ast":null,"code":"import _objectSpread from\"C:/Users/kandw/OneDrive/Desktop/Ecommerce/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/kandw/OneDrive/Desktop/Ecommerce/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'../axios';import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import Loading from'../components/Loading';import SimilarProduct from'../components/SimilarProduct';import{Container,Row,Col,Badge,ButtonGroup,Form,Button}from'react-bootstrap';import AliceCarousel from'react-alice-carousel';import'react-alice-carousel/lib/alice-carousel.css';import{useParams}from'react-router-dom';import'./ProductPage.css';import{LinkContainer}from'react-router-bootstrap';import{useAddToCartMutation}from'../services/appApi';import ToastMessage from'../components/ToastMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){var _useParams=useParams(),id=_useParams.id;var user=useSelector(function(state){return state.user;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),similar=_useState4[0],setSimilar=_useState4[1];var _useAddToCartMutation=useAddToCartMutation(),_useAddToCartMutation2=_slicedToArray(_useAddToCartMutation,2),addToCart=_useAddToCartMutation2[0],isSuccess=_useAddToCartMutation2[1].isSuccess;var handleDragStart=function handleDragStart(e){e.preventDefault();};useEffect(function(){axios.get(\"/products/\".concat(id)).then(function(_ref){var data=_ref.data;setProduct(data.product);setSimilar(data.similar);});},[id]);if(!product){return/*#__PURE__*/_jsx(Loading,{});}var responsive={0:{items:1},568:{items:2},1024:{items:3}};var images=product.pictures.map(function(picture){return/*#__PURE__*/_jsx(\"img\",{className:\"product__carousel--image\",src:picture.url,onDragStart:handleDragStart});});var similarProducts=[];if(similar){similarProducts=similar.map(function(product,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",\"data-value\":idx,children:/*#__PURE__*/_jsx(SimilarProduct,_objectSpread({},product))});});}return/*#__PURE__*/_jsxs(Container,{className:\"pt-4\",style:{position:'relative'},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:6,children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:images,controlsStrategy:\"alternate\"})}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"pt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"primary\",children:product.category})}),/*#__PURE__*/_jsxs(\"p\",{className:\"product__price\",children:[\"$\",product.price,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:'justify'},className:\"py-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",product.description]}),user&&!user.isAdmin&&/*#__PURE__*/_jsxs(ButtonGroup,{style:{width:'90%'},children:[/*#__PURE__*/_jsxs(Form.Select,{size:\"lg\",style:{width:'40%',borderRadius:\"0\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(Button,{size:\"lg\",onClick:function onClick(e){return addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url});},children:\"Add to cart\"})]}),user&&user.isAdmin&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Edit Product\"})}),isSuccess&&/*#__PURE__*/_jsx(ToastMessage,{bg:\"info\",title:\"Added to cart\",body:\"\".concat(product.name,\" is in your cart\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Similar Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center flex-wrap\",children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:similarProducts,responsive:responsive,controlsStrategy:\"alternate\"})})]})]});}export default ProductPage;","map":{"version":3,"names":["axios","React","useState","useEffect","useSelector","Loading","SimilarProduct","Container","Row","Col","Badge","ButtonGroup","Form","Button","AliceCarousel","useParams","LinkContainer","useAddToCartMutation","ToastMessage","ProductPage","id","user","state","product","setProduct","similar","setSimilar","addToCart","isSuccess","handleDragStart","e","preventDefault","get","then","data","responsive","items","images","pictures","map","picture","url","similarProducts","idx","position","name","category","price","textAlign","description","isAdmin","width","borderRadius","userId","_id","productId","image"],"sources":["C:/Users/kandw/OneDrive/Desktop/Ecommerce/client/src/pages/ProductPage.js"],"sourcesContent":["import axios from '../axios';\nimport React, { useState,useEffect } from 'react'\nimport { useSelector } from 'react-redux';\nimport Loading from '../components/Loading';\nimport SimilarProduct from '../components/SimilarProduct';\nimport { Container,Row,Col,Badge, ButtonGroup,Form, Button } from 'react-bootstrap';\nimport AliceCarousel from 'react-alice-carousel';\nimport 'react-alice-carousel/lib/alice-carousel.css'\nimport { useParams } from 'react-router-dom';\nimport './ProductPage.css'; \nimport { LinkContainer } from 'react-router-bootstrap';\nimport { useAddToCartMutation } from '../services/appApi';\nimport ToastMessage from '../components/ToastMessage';\n\nfunction ProductPage() {\n    const {id}=useParams();\n    const user=useSelector(state=>state.user);\n    const [product,setProduct]=useState(null);\n    const [similar,setSimilar]=useState(null);\n    const [addToCart,{isSuccess}]=useAddToCartMutation();\n\n    const handleDragStart=(e)=>{\n        e.preventDefault();\n    }\n\n    useEffect(()=>{\n        axios.get(`/products/${id}`).then(({data})=>{\n            setProduct(data.product);\n            setSimilar(data.similar);\n        })\n    },[id])\n    if(!product){\n        return <Loading />\n    }\n\n    const responsive={\n        0:{items:1},\n        568:{items:2},\n        1024:{items:3},\n    }\n\n    const images=product.pictures.map((picture)=> <img className='product__carousel--image' src={picture.url} onDragStart={handleDragStart} />)\n    \n\n    let similarProducts=[];\n    if(similar){\n        similarProducts=similar.map((product,idx)=>{\n            return <div className='item' data-value={idx}><SimilarProduct {...product} /></div>\n        })\n    }\n\n  return (\n    <Container className=\"pt-4\" style={{position:'relative'}}>\n        <Row>\n            <Col lg={6}>\n                <AliceCarousel mouseTracking items={images} controlsStrategy=\"alternate\" />\n            </Col>\n            <Col lg={6} className=\"pt-4\">\n                <h1>{product.name}</h1>\n                <p><Badge bg=\"primary\">{product.category}</Badge></p>\n                <p className='product__price'>${product.price} </p>\n                <p  style={{textAlign:'justify'}} className='py-3'>\n                    <strong>Description:</strong> {product.description}\n                </p>\n                {user && !user.isAdmin && (\n                    <ButtonGroup style={{width:'90%'}}>\n                        <Form.Select size=\"lg\" style={{width:'40%',borderRadius:\"0\"}}>\n                            <option value=\"1\">1</option>\n                            <option value=\"2\">2</option>\n                            <option value=\"3\">3</option>\n                            <option value=\"4\">4</option>\n                            <option value=\"5\">5</option>\n                        </Form.Select>\n                        <Button size=\"lg\" onClick={(e)=>addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url})}>\n                            Add to cart\n                        </Button>\n                    </ButtonGroup>\n                )}\n                {user && user.isAdmin && (\n                    <LinkContainer to={`/product/${product._id}/edit`}>\n                        <Button size=\"lg\">Edit Product</Button>\n                    </LinkContainer>\n                )}\n                {isSuccess && <ToastMessage bg=\"info\" title=\"Added to cart\" body={`${product.name} is in your cart`} />}\n            </Col>\n        </Row>\n        <div className='my-4'>\n            <h2>Similar Products</h2>\n            <div className='d-flex justify-content-center align-items-center flex-wrap'>\n                <AliceCarousel mouseTracking items={similarProducts} responsive={responsive} controlsStrategy='alternate' />\n            </div>\n        </div>\n    </Container>\n  )\n}\n\nexport default ProductPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}