{"ast":null,"code":"import _slicedToArray from\"C:/Users/Admin/Desktop/new-ecommerce-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./CartPage.css';import{useSelector}from'react-redux';import{Row,Alert,Container,Col,Table}from'react-bootstrap';import{useDecreaseCartProductMutation,useIncreaseCartProductMutation,useRemoveFromCartMutation}from'../services/appApi';import{loadStripe}from'@stripe/stripe-js';import{Elements}from'@stripe/react-stripe-js';import CheckoutForm from'../components/CheckoutForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51N5OJrSCMJ09MRJvvS0lpi1Bjug4kafWvYNHZMMaBksHMOwUgfKRjo6rBBiYkXwlIBdXXb7yLWDzmIXgrsKkVSow00BnCovcSX\");function CartPage(){var user=useSelector(function(state){return state.user;});var products=useSelector(function(state){return state.products;});var userCartObj=user.cart;// console.log(products);\n// console.log(userCartObj);\nvar _useIncreaseCartProdu=useIncreaseCartProductMutation(),_useIncreaseCartProdu2=_slicedToArray(_useIncreaseCartProdu,1),increaseCart=_useIncreaseCartProdu2[0];var _useDecreaseCartProdu=useDecreaseCartProductMutation(),_useDecreaseCartProdu2=_slicedToArray(_useDecreaseCartProdu,1),decreaseCart=_useDecreaseCartProdu2[0];var _useRemoveFromCartMut=useRemoveFromCartMutation(),_useRemoveFromCartMut2=_slicedToArray(_useRemoveFromCartMut,2),removeFromCart=_useRemoveFromCartMut2[0],isLoading=_useRemoveFromCartMut2[1].isLoading;function handleDecrease(product){var quantity=user.cart[product.productId];if(quantity<=0)return alert(\"Can't proceed\");decreaseCart(product);}var cart=products.filter(function(product){return userCartObj[product._id]!=null;});console.log(user);return/*#__PURE__*/_jsx(Container,{style:{minHeight:'95vh'},className:\"cart-container\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-2 h3\",children:\"Shopping cart\"}),cart.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Shopping cart is empty. Add products to your cart\"}):/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})]}),cart.length>0&&/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"cart-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\xA0\"}),/*#__PURE__*/_jsxs(\"td\",{children:[!isLoading&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\",style:{marginRight:10,cursor:\"pointer\"},onClick:function onClick(){return removeFromCart({userId:user._id,productId:item._id,price:item.price});}}),/*#__PURE__*/_jsx(\"img\",{src:item.pictures[0].url,style:{width:100,height:100,objectFit:\"cover\"}})]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"quantity-indicator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-minus-circle\",onClick:function onClick(){return handleDecrease({productId:item._id,price:item.price,userId:user._id});}}),/*#__PURE__*/_jsx(\"span\",{children:user.cart[item._id]}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus-circle\",onClick:function onClick(){return increaseCart({productId:item._id,price:item.price,userId:user._id});}})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price*user.cart[item._id]]})]});})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"h4 pt-4\",children:[\"Total: $\",user.cart.total]})})]})})]})});}export default CartPage;","map":{"version":3,"names":["React","useState","useSelector","Row","Alert","Container","Col","Table","useDecreaseCartProductMutation","useIncreaseCartProductMutation","useRemoveFromCartMutation","loadStripe","Elements","CheckoutForm","stripePromise","CartPage","user","state","products","userCartObj","cart","increaseCart","decreaseCart","removeFromCart","isLoading","handleDecrease","product","quantity","productId","alert","filter","_id","console","log","minHeight","length","map","item","marginRight","cursor","userId","price","pictures","url","width","height","objectFit","total"],"sources":["C:/Users/Admin/Desktop/new-ecommerce-main/client/src/pages/CartPage.js"],"sourcesContent":["import React, { useState } from 'react'\nimport './CartPage.css'\nimport { useSelector } from 'react-redux'\nimport { Row,Alert,Container,Col,Table } from 'react-bootstrap';\nimport { useDecreaseCartProductMutation, useIncreaseCartProductMutation, useRemoveFromCartMutation } from '../services/appApi';\nimport {loadStripe} from '@stripe/stripe-js';\nimport {Elements} from '@stripe/react-stripe-js';\nimport CheckoutForm from '../components/CheckoutForm';\n\nconst stripePromise=loadStripe(\"pk_test_51N5OJrSCMJ09MRJvvS0lpi1Bjug4kafWvYNHZMMaBksHMOwUgfKRjo6rBBiYkXwlIBdXXb7yLWDzmIXgrsKkVSow00BnCovcSX\");\n\n\n\nfunction CartPage() {\n    const user=useSelector(state=>state.user);\n    const products=useSelector(state=>state.products);\n    const userCartObj=user.cart;\n    // console.log(products);\n    // console.log(userCartObj);\n    const [increaseCart]=useIncreaseCartProductMutation();\n    const [decreaseCart]=useDecreaseCartProductMutation();\n    const [removeFromCart,{isLoading}]=useRemoveFromCartMutation();\n\n    function handleDecrease(product){\n      const quantity=user.cart[product.productId];\n      if(quantity<=0) return alert(\"Can't proceed\");\n      decreaseCart(product);\n    }\n\n    let cart=products.filter((product)=>userCartObj[product._id]!=null);\n    console.log(user);\n  return <Container style={{minHeight:'95vh'}} className=\"cart-container\">\n    <Row>\n        <Col>\n        <h1 className='pt-2 h3'>Shopping cart</h1>\n        {cart.length===0?(\n            <Alert variant='info'>Shopping cart is empty. Add products to your cart</Alert>\n        ): <Elements stripe={stripePromise}>\n          <CheckoutForm />\n        </Elements> }\n        </Col>\n       \n          {cart.length>0 && (\n             <Col md={5}>\n            <>\n              <Table responsive=\"sm\" className=\"cart-table\">\n                <thead>\n                  <tr>\n                    <th>&nbsp;</th>\n                    <th>Product</th>\n                    <th>Price</th>\n                    <th>Quantity</th>\n                    <th>Subtotal</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {cart.map(item=>(\n                    <tr>\n                      <td>&nbsp;</td>\n                      <td>\n                        {!isLoading && <i className='fa fa-times' style={{marginRight:10,cursor:\"pointer\"}} onClick={()=>removeFromCart({userId:user._id,productId:item._id,price:item.price})}></i> }\n                        <img src={item.pictures[0].url} style={{width:100,height:100,objectFit:\"cover\"}} />\n                      </td>\n                      <td>\n                        ${item.price}\n                      </td>\n                      <td>\n                        <span className='quantity-indicator'>\n                          <i className='fa fa-minus-circle' onClick={()=>handleDecrease({productId:item._id,price:item.price,userId:user._id})}></i>\n                          <span>{user.cart[item._id]}</span>\n                          <i className='fa fa-plus-circle' onClick={()=>increaseCart({productId:item._id,price:item.price,userId:user._id})}></i>\n                        </span>\n                      </td>\n                      <td>\n                        ${item.price*user.cart[item._id]}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </Table>\n              <div>\n                <h3 className='h4 pt-4'>Total: ${user.cart.total}</h3>\n              </div>\n            </>\n        </Col>\n          )}\n    </Row>\n  </Container>\n}\n\nexport default CartPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}